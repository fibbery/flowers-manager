# 🔍 查询功能使用说明

## ✨ 新增功能

已成功添加两种查询功能，支持模糊查询！

### 1️⃣ 根据人名查询该人拥有的花朵

**功能说明**：输入人名（支持部分匹配），查询该人拥有哪些花朵

**使用方式**：
- 在"根据人名查花朵"输入框中输入人名
- 支持模糊查询，比如输入"蒋"可以匹配"蒋能华"
- 点击"查询"按钮或按回车键
- 查询结果会显示所有匹配的人员及其花朵列表

**API 接口**：
```
GET /api/search/person?name=<人名>
```

**示例**：
```bash
# 查询名字包含"蒋"的人
curl "http://localhost:3000/api/search/person?name=蒋"

# 返回结果
{
  "results": [
    {
      "id": 1,
      "name": "蒋能华",
      "flowers": [
        {"id": 2, "name": "茉莉花"},
        {"id": 3, "name": "菊花"},
        {"id": 4, "name": "玫瑰花"}
      ]
    }
  ]
}
```

### 2️⃣ 根据花名查询拥有该花的人

**功能说明**：输入花名（支持部分匹配），查询哪些人拥有该花朵

**使用方式**：
- 在"根据花名查拥有者"输入框中输入花名
- 支持模糊查询，比如输入"玫瑰"可以匹配"玫瑰花"
- 点击"查询"按钮或按回车键
- 查询结果会显示所有拥有该花朵的人员及对应的花朵

**API 接口**：
```
GET /api/search/flower?name=<花名>
```

**示例**：
```bash
# 查询拥有"玫瑰"相关花朵的人
curl "http://localhost:3000/api/search/flower?name=玫瑰"

# 返回结果
{
  "results": [
    {
      "id": 1,
      "name": "蒋能华",
      "flowers": [
        {"id": 4, "name": "玫瑰花"}
      ]
    }
  ]
}
```

## 🎨 界面特点

1. **双查询框布局**：两种查询方式并排显示，方便切换使用
2. **模糊查询支持**：无需输入完整名称，部分匹配即可
3. **回车键快捷查询**：在输入框中按回车键直接查询
4. **结果卡片展示**：查询结果以卡片形式展示，清晰明了
5. **结果统计**：显示找到的匹配数量
6. **清除按钮**：一键清除查询结果和输入内容
7. **空结果提示**：未找到结果时显示友好提示

## 📝 使用示例

### 示例 1：查询张三有什么花

1. 在"根据人名查花朵"输入框输入：`张三`
2. 点击"查询"按钮
3. 系统显示张三拥有的所有花朵

### 示例 2：查询谁有玫瑰花

1. 在"根据花名查拥有者"输入框输入：`玫瑰`
2. 点击"查询"按钮
3. 系统显示所有拥有玫瑰花（或名字包含"玫瑰"的花）的人员

### 示例 3：模糊查询

- 输入"李"可以找到：李明、李华、李小龙等
- 输入"菊"可以找到：菊花、雏菊、金盏菊等

## 🎯 技术实现

### 后端实现
- 使用 SQL `LIKE` 语句实现模糊查询
- 支持中文字符的模糊匹配
- 自动关联查询人员和花朵数据
- 返回结构化的 JSON 数据

### 前端实现
- Vue 3 Composition API
- 响应式数据绑定
- 实时查询和结果展示
- 美观的渐变色设计
- 流畅的交互动画

## 🚀 启动服务

确保后端和前端服务都在运行：

```bash
# 后端（终端 1）
cd /Users/fibbery/flowers-manager/backend
node server.js

# 前端（终端 2）
cd /Users/fibbery/flowers-manager/frontend
npm run dev
```

然后访问：http://localhost:5173

## ✅ 测试验证

### 测试 API

```bash
# 测试人名查询
curl "http://localhost:3000/api/search/person?name=测试人名"

# 测试花名查询
curl "http://localhost:3000/api/search/flower?name=测试花名"
```

### 测试前端

1. 打开浏览器访问 http://localhost:5173
2. 在页面顶部看到"🔍 查询功能"区域
3. 尝试输入测试数据进行查询
4. 查看查询结果是否正常显示

## 📊 当前状态

- ✅ 后端 API：已实现并测试通过
- ✅ 前端界面：已实现并集成到主页面
- ✅ 模糊查询：支持中文和英文模糊匹配
- ✅ 响应式设计：适配各种屏幕尺寸
- ✅ 用户体验：流畅的交互和友好的提示

## 🎉 完成功能

1. ✅ 根据人名查询花朵（支持模糊查询）
2. ✅ 根据花名查询拥有者（支持模糊查询）
3. ✅ 美观的查询界面
4. ✅ 实时查询结果展示
5. ✅ 清除查询功能
6. ✅ 空结果友好提示

